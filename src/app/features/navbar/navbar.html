<nav
  #navbar
  data-testid="navbar"
  [class]="
    'navbar bg-base-100/80 fixed top-0 right-0 left-0 z-50 border-b backdrop-blur-md transition-all duration-300 will-change-[box-shadow,border-color] ' +
    (isScrolled()
      ? 'border-base-300 dark:shadow-primary/10 shadow-lg dark:shadow-md'
      : 'border-transparent shadow-none')
  ">
  <div
    data-testid="navbar-container"
    [class.md:justify-between]="openToWork()"
    [class.md:justify-end]="!openToWork()"
    class="container mx-auto flex max-w-5xl flex-col items-center justify-center gap-6 px-2 py-4 md:flex-row md:gap-0 md:py-6">
    @if (isFeatureFlagLoaded()) {
      @if (openToWork()) {
        <app-badge
          data-testid="hero-badge"
          (clicked)="contactEmail()">
          {{ 'common.navbar.openToWork' | transloco }}
        </app-badge>
      }

      <div class="flex items-center gap-4 md:ml-auto md:gap-2">
        <button
          type="button"
          appButton
          variant="link"
          size="sm"
          [disabled]="isDownloading()"
          [attr.aria-label]="
            isDownloading()
              ? ('common.navbar.downloadingCV' | transloco)
              : ('common.navbar.downloadCV' | transloco)
          "
          [attr.aria-busy]="isDownloading()"
          (click)="handleDownloadCV()"
          class="text-base-content hover:text-primary flex items-center p-0 text-base font-normal no-underline disabled:cursor-not-allowed disabled:opacity-50">
          @if (isDownloading()) {
            <span
              class="loading loading-dots loading-sm text-primary"
              aria-hidden="true"></span>
          } @else {
            {{ 'common.navbar.downloadCV' | transloco }}
          }
        </button>

        <button
          type="button"
          appButton
          variant="link"
          size="sm"
          [circle]="true"
          [attr.aria-label]="'common.navbar.contactMe' | transloco"
          (click)="contactEmail()"
          class="text-base-content/75 hover:text-primary">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            class="h-5 w-5"
            stroke-linejoin="round">
            <path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7" />
            <rect
              x="2"
              y="4"
              width="20"
              height="16"
              rx="2" />
          </svg>
        </button>

        <app-language-switcher />
      </div>
    }
  </div>
</nav>
